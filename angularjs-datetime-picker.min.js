!function(){"use strict";angular.module("angularjs-datetime-picker",[]);var a=function(a){"string"==typeof a&&(a=new Date(a));var b=new Date(a.getFullYear(),0,1),c=new Date(a.getFullYear(),6,1),d=Math.max(b.getTimezoneOffset(),c.getTimezoneOffset()),e=a.getTimezoneOffset()<d,f=e?d-60:d,g=f>=0?"-":"+";return g+("0"+Math.floor(Math.abs(f/60))).slice(-2)+":"+("0"+f%60).slice(-2)},b=function(a,b,c){var d=c("DatetimePickerCtrl");return{open:function(a){d.openDatetimePicker(a)},close:function(){d.closeDatetimePicker()}}};b.$inject=["$compile","$document","$controller"],angular.module("angularjs-datetime-picker").factory("DatetimePicker",b);var c=function(a,b){var c,d=this,e=function(a){a&&a.remove(),b[0].body.removeEventListener("click",d.closeDatetimePicker)};this.openDatetimePicker=function(d){this.closeDatetimePicker();var e=angular.element("<div datetime-picker-popup ng-cloak></div>");d.dateFormat&&e.attr("date-format",d.dateFormat),d.ngModel&&e.attr("ng-model",d.ngModel),d.year&&e.attr("year",parseInt(d.year)),d.month&&e.attr("month",parseInt(d.month)),d.day&&e.attr("day",parseInt(d.day)),d.hour&&e.attr("hour",parseInt(d.hour)),d.minute&&e.attr("minute",parseInt(d.minute)),(""===d.dateOnly||d.dateOnly===!0)&&e.attr("date-only","true"),"false"===d.closeOnSelect&&e.attr("close-on-select","false");var f=d.triggerEl;d.scope=d.scope||angular.element(f).scope(),c=a(e)(d.scope)[0],c.triggerEl=d.triggerEl,b[0].body.appendChild(c);var g=f.getBoundingClientRect();d.scope.$apply();var h=c.getBoundingClientRect();c.style.position="absolute",g.width>h.width?c.style.left=g.left+g.width-h.width+window.scrollX+"px":c.style.left=g.left+window.scrollX+"px",g.top<300||window.innerHeight-g.bottom>300?c.style.top=g.bottom+window.scrollY+"px":c.style.top=g.top-h.height+window.scrollY+"px",b[0].body.addEventListener("click",this.closeDatetimePicker)},this.closeDatetimePicker=function(a){var c=a&&a.target,d=b[0].querySelector("div[datetime-picker-popup]");a&&c?c.hasAttribute("datetime-picker")||d&&d.contains(c)||e(d):e(d)}};c.$inject=["$compile","$document"],angular.module("angularjs-datetime-picker").controller("DatetimePickerCtrl",c);var d='<div class="jrdp_calendar_pos"><table class="jrdp_encapsulated_table" cellspacing="0" cellpadding="0"><tbody><tr><td class="jrdp_calendar_box"><table class="jrdp_calendar_multi" cellspacing="0" cellpadding="0"><tbody><tr class="jrdp_calendar_month_tbar_multi"><td colspan="1" class="limitPrevious jrdp_calendar_month_prev_multi" align="left" ng-click="addMonth(-1)"><span class="width100 fl">&laquo;</span></td><td colspan="5" class="jrdp_calendar_month_multi" align="center" title="{{months[mv.month].fullName}}">{{months[mv.month].shortName}} {{mv.year}}</td><td colspan="1" class="jrdp_calendar_month_next_multi" align="right" ng-click="addMonth(1)"><span class="width100 fl">&raquo;</span></td></tr><tr><td class="jrdp_calendar_days_multi" ng-repeat="dayOfWeek in ::daysOfWeek" title="{{dayOfWeek.fullName}}"><div class="adp-day">{{::dayOfWeek.firstLetter}}</div></td></tr><tr><td colspan="7" ng-click="setDate($event)"><div class="jrdp_calendar_day1_noselect_multi adp-day" ng-show="mv.leadingDays.length < 7" ng-repeat="day in mv.leadingDays"><div class="calDate"><span>{{::day}}</span></div></div><div class="jrdp_calendar_day1_multi adp-day selectable" ng-repeat="day in mv.days" day="{{day}}" today="{{today}}" d2="{{mv.year + \'-\' + (mv.month + 1) + \'-\' + day}}" ng-class="{jrdp_calendar_current_day_multi: (day == selectedDay) || (today == (mv.year + \'-\' + (mv.month + 1) + \'-\' + day) && !selectedDay)}"><div class="calDate selectable" day="{{day}}"><span class="selectable" day="{{day}}">{{::day}}</span></div></div><div class="jrdp_calendar_day1_noselect_multi adp-day" ng-show="mv.trailingDays.length < 7" ng-repeat="day in mv.trailingDays"><div class="calDate"><span>{{::day}}</span></div></div></td></tr></tbody></table></td><td class="jrdp_calendar_box"><table class="jrdp_calendar_multi" cellspacing="0" cellpadding="0"><tbody><tr class="jrdp_calendar_month_tbar_multi"><td colspan="5" class="jrdp_calendar_month_multi" align="center" title="Select Hours">Hours</td></tr><tr><td colspan="7" ng-click="setHour($event)"><div class="jrdp_calendar_day1_multi adp-day" ng-repeat="hour in [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]" hour="{{hour}}" ng-class="{jrdp_calendar_current_day_multi: (hour == inputHour)}"><div class="calDate" hour="{{hour}}"><span hour="{{hour}}">{{hour}}</span></div></div></td></tr><tr class="jrdp_calendar_month_tbar_multi"><td colspan="5" class="jrdp_calendar_month_multi" align="center" title="Select Minutes">Minutes</td></tr><tr><td colspan="7" ng-click="setMinute($event)"><div class="jrdp_calendar_day1_multi adp-day" ng-repeat="minute in [0, 5,10,15,20,25,30,35,40,45,50,55]" minute="{{minute}}" ng-class="{jrdp_calendar_current_day_multi: (minute == inputMinute)}"><div class="calDate" minute="{{minute}}"><span minute="{{minute}}">{{minute}}</span></div></div></td></tr></tbody></table></td></tr></tbody></table></div>',e=function(b,c){var e,f,g,h,i=function(){e=[],f=[],g=[],h=0;for(var a=1;31>=a;a++)e.push(a);for(var a=0;12>a;a++)f.push({fullName:b.DATETIME_FORMATS.MONTH[a],shortName:b.DATETIME_FORMATS.SHORTMONTH[a]});for(var a=0;7>a;a++){var c=b.DATETIME_FORMATS.DAY[(a+h)%7];g.push({fullName:c,firstLetter:c.substr(0,1)})}h=0},j=function(a,b){b>11?a++:0>b&&a--,b=(b+12)%12;var c=new Date(a,b,1),d=new Date(a,b+1,0),f=new Date(a,b,0),g=d.getDate(),i=f.getDate(),j=c.getDay(),k=(j-h+7)%7||7,l=e.slice(0,42-(k+g));return l.length>7&&(l=l.slice(0,l.length-7)),{year:a,month:b,days:e.slice(0,g),leadingDays:e.slice(-k-(31-i),i),trailingDays:l}},k=function(b,d,e,h){i();var k=e.dateFormat||"short";b.months=f,b.daysOfWeek=g,b.inputHour,b.inputMinute,b.dateOnly===!0&&(d[0].querySelector("#adp-time").style.display="none"),b.$applyAsync(function(){if(h.triggerEl=angular.element(d[0].triggerEl),e.ngModel){var f=""+h.triggerEl.scope().$eval(e.ngModel);if(f){f.match(/[0-9]{2}:/)||(f+=" 00:00:00"),f=f.replace(/([0-9]{2}-[0-9]{2})-([0-9]{4})/,"$2-$1"),f=f.replace(/([\/-][0-9]{2,4})\ ([0-9]{2}\:[0-9]{2}\:)/,"$1T$2"),f=f.replace(/EDT|EST|CDT|CST|MDT|PDT|PST|UT|GMT/g,""),f=f.replace(/\s*\(\)\s*/,""),f=f.replace(/[\-\+][0-9]{2}:?[0-9]{2}$/,""),f+=a(f);var g=new Date(f);b.selectedDate=new Date(g.getFullYear(),g.getMonth(),g.getDate(),g.getHours(),g.getMinutes(),g.getSeconds())}}if(!b.selectedDate||isNaN(b.selectedDate.getTime())){var i=new Date,k=b.year||i.getFullYear(),l=b.month?b.month-1:i.getMonth(),m=b.day||i.getDate(),n=0==b.hour?0:b.hour?b.hour:i.getHours(),o=0==b.minute?0:b.minute?b.minute:i.getMinutes();b.selectedDate=new Date(k,l,m,n,o,0)}b.inputHour=b.selectedDate.getHours(),b.inputMinute=b.selectedDate.getMinutes(),b.mv=j(b.selectedDate.getFullYear(),b.selectedDate.getMonth()),b.today=c(new Date,"yyyy-M-d"),b.mv.year==b.selectedDate.getFullYear()&&b.mv.month==b.selectedDate.getMonth()?b.selectedDay=b.selectedDate.getDate():b.selectedDay=null}),b.addMonth=function(a){b.mv=j(b.mv.year,b.mv.month+a)},b.setDate=function(a){var c=angular.element(a.target)[0];-1!==c.className.indexOf("selectable")&&b.updateNgModel(parseInt(c.getAttribute("day")))},b.setHour=function(a){var c=angular.element(a.target)[0];b.inputHour=parseInt(c.getAttribute("hour")),b.updateNgModel()},b.setMinute=function(a){var c=angular.element(a.target)[0];b.inputMinute=parseInt(c.getAttribute("minute")),b.updateNgModel(),b.closeOnSelect!==!1&&h.closeDatetimePicker()},b.updateNgModel=function(a){if(a=a?a:b.selectedDate.getDate(),b.selectedDate=new Date(b.mv.year,b.mv.month,a,b.inputHour,b.inputMinute,0),b.selectedDay=b.selectedDate.getDate(),e.ngModel){var f,d=h.triggerEl.scope();f=d.$eval(e.ngModel)&&"Date"===d.$eval(e.ngModel).constructor.name?new Date(c(b.selectedDate,k)):c(b.selectedDate,k),d.$eval(e.ngModel+"= date",{date:f})}},b.$on("$destroy",h.closeDatetimePicker)};return{restrict:"A",template:d,controller:"DatetimePickerCtrl",replace:!0,scope:{year:"=",month:"=",day:"=",hour:"=",minute:"=",dateOnly:"=",closeOnSelect:"="},link:k}};e.$inject=["$locale","dateFilter"],angular.module("angularjs-datetime-picker").directive("datetimePickerPopup",e);var f=function(a,b){return{require:"ngModel",link:function(a,c,d,e){a.$watch(d.ngModel,function(a){if(a&&""!=a){var b=new Date(a);e.$setValidity("date",b?!0:!1);var c=new Date;d.hasOwnProperty("futureOnly")&&e.$setValidity("future-only",c>b?!1:!0)}}),c[0].addEventListener("click",function(){b.open({triggerEl:c[0],dateFormat:d.dateFormat,ngModel:d.ngModel,year:d.year,month:d.month,day:d.day,hour:d.hour,minute:d.minute,dateOnly:d.dateOnly,futureOnly:d.futureOnly,closeOnSelect:d.closeOnSelect})})}}};f.$inject=["$parse","DatetimePicker"],angular.module("angularjs-datetime-picker").directive("datetimePicker",f)}();
